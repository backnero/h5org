(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5bb70421"],{"5b80":function(e,t,r){"use strict";var o=r("a498"),a=r.n(o);a.a},"99af":function(e,t,r){"use strict";var o=r("23e7"),a=r("d039"),s=r("e8b5"),n=r("861d"),c=r("7b0b"),i=r("50c4"),l=r("8418"),u=r("65f0"),p=r("1dde"),d=r("b622"),f=r("2d00"),m=d("isConcatSpreadable"),h=9007199254740991,w="Maximum allowed index exceeded",b=f>=51||!a((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),g=p("concat"),k=function(e){if(!n(e))return!1;var t=e[m];return void 0!==t?!!t:s(e)},v=!b||!g;o({target:"Array",proto:!0,forced:v},{concat:function(e){var t,r,o,a,s,n=c(this),p=u(n,0),d=0;for(t=-1,o=arguments.length;t<o;t++)if(s=-1===t?n:arguments[t],k(s)){if(a=i(s.length),d+a>h)throw TypeError(w);for(r=0;r<a;r++,d++)r in s&&l(p,d,s[r])}else{if(d>=h)throw TypeError(w);l(p,d++,s)}return p.length=d,p}})},a498:function(e,t,r){},aefe:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-card",{staticClass:"box-card conter"},[r("div",{staticClass:"title"},[e._v("注册")]),r("el-form",{ref:"Form",staticClass:"Form",attrs:{model:e.Form,rules:e.rules}},[r("el-form-item",{attrs:{prop:"email"}},[r("el-input",{attrs:{spellcheck:"false",autocomplete:"on",placeholder:"请输入邮箱(xxxx@xxx.com)"},model:{value:e.Form.email,callback:function(t){e.$set(e.Form,"email",t)},expression:"Form.email"}})],1),r("el-form-item",{attrs:{prop:"title"}},[r("el-input",{attrs:{autocomplete:"off",placeholder:"请输入机构名称"},model:{value:e.Form.title,callback:function(t){e.$set(e.Form,"title",t)},expression:"Form.title"}})],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{ref:"pass",attrs:{type:e.pwdType,autocomplete:"off",placeholder:"请输入密码"},model:{value:e.Form.password,callback:function(t){e.$set(e.Form,"password",t)},expression:"Form.password"}}),r("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[r("svg-icon",{attrs:{"icon-class":"eye"}})],1)],1),r("el-form-item",{attrs:{prop:"checkPass"}},[r("el-input",{ref:"checkPass",attrs:{type:e.checkPassType,autocomplete:"off",placeholder:"请再次输入并且确认密码"},model:{value:e.Form.checkPass,callback:function(t){e.$set(e.Form,"checkPass",t)},expression:"Form.checkPass"}}),r("span",{staticClass:"show-pwd",on:{click:e.showcheckPass}},[r("svg-icon",{attrs:{"icon-class":"eye"}})],1)],1),r("el-form-item",{attrs:{prop:"logo_id"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","list-type":"picture-card","show-file-list":!1,"before-upload":e.uploadFile}},[e.Form.logo_id?r("img",{staticClass:"avatar",attrs:{src:e.Form.imageUrl}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),r("el-form-item",{staticClass:"submit-wrapper"},[r("button",{staticClass:"submit",attrs:{type:"button"},on:{click:function(t){return e.submitForm("Form")}}},[e._v(" 立即注册 ")])])],1)],1)],1)},a=[],s=(r("b0c0"),r("5530")),n=(r("96cf"),r("1da1")),c=r("61f7"),i=r("b775"),l=function(e){return Object(i["a"])({url:"cms/file/image",method:"post",data:e})},u=r("78b1"),p={uri:"https://sso.qstcm.com",ID:"f9c7cfb6-290f-49d4-9545-f516bea8ed02"},d=p;r("99af");function f(e,t,r){window.location.href="".concat(e,"?redirect_url=").concat(t,"&agentID=").concat(r)}var m=r("4360");function h(e,t){e.query.token?m["a"].dispatch("Login_token",{token:decodeURIComponent(e.query.token)}).then((function(){t({path:e.path,query:{},replace:!0})})):t()}var w=h,b=r("1b62"),g={mixins:[b["a"]],data:function(){var e=this,t=function(e,t,r){Object(c["e"])(t)?r():r(new Error("邮箱不符合规则"))},r=function(e,t,r){Object(c["d"])(t)?r():r(new Error("验证码不符合规则"))},o=function(t,r,o){Object(c["b"])(r)?(""!==e.Form.checkPass&&e.$refs.Form.validateField("checkPass"),o()):o(new Error("请输入至少6位"))},a=function(t,r,o){Object(c["b"])(r)?r!==e.Form.password?o(new Error("两次输入密码不一致!")):o():o(new Error("请输入至少6位"))};return{pwdType:"password",checkPassType:"password",show:!0,count:0,Form:{email:"",code:"",password:"",checkPass:"",logo_id:"",title:"",imageUrl:""},rules:{email:[{required:!0,trigger:"blur",validator:t}],pass:[{required:!0,trigger:"blur",validator:o}],code:[{required:!0,trigger:"blur",validator:r}],title:[{required:!0,trigger:"blur",message:"请填写机构名称"}],password:[{validator:o,trigger:"blur"}],checkPass:[{validator:a,trigger:"blur"}],logo_id:{required:!0,message:"请上传机构logo",trigger:"change"}}}},computed:{agent_token:function(){return this.$store.getters.agent_token},app:function(){return d}},methods:{uploadFile:function(e){var t=this,r=new FormData;return r.append("image",e),r.append("title",e.name),l(r).then((function(e){1==e.status_code&&(t.Form.logo_id=e.data.id,t.Form.imageUrl=e.data.url)})),!1},getCode:function(){},submitForm:function(e,t){var r=this;this.$refs[e].validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=12;break}if(!r.agent_token){e.next=11;break}return o=Object(s["a"])({},r.Form),o.password=r.encryption(o.password),o.checkPass=r.encryption(o.checkPass),e.next=7,Object(u["f"])(o);case 7:r.$message({type:"success",message:"注册成功(需审核后登录)"}),r.$router.push({name:"login"}),e.next=12;break;case 11:r.open();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},showPwd:function(){var e=this;"password"===this.pwdType?this.pwdType="":this.pwdType="password",this.$nextTick((function(){e.$refs.pass.focus()}))},showcheckPass:function(){var e=this;"password"===this.checkPassType?this.checkPassType="":this.checkPassType="password",this.$nextTick((function(){e.$refs.checkPass.focus()}))},open:function(){var e=this.app.uri,t=this.app.ID,r=window.location.href;this.$alert("尊敬的用户您好，您需要登录(登录完成后继续操作)！","提示",{distinguishCancelAndClose:!0,showClose:!1,confirmButtonText:"立即登录"}).then((function(){f(e,encodeURIComponent(r),t)}))}},mounted:function(){this.agent_token||this.open()},created:function(){},beforeRouteEnter:function(e,t,r){w(e,r)}},k=g,v=(r("5b80"),r("2877")),F=Object(v["a"])(k,o,a,!1,null,"70b6822a",null);t["default"]=F.exports}}]);
//# sourceMappingURL=chunk-5bb70421.30ac0d08.js.map